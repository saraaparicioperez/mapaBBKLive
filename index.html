<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mapa interactivo</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 24px; background:#fafafa; }
    h1 { max-width: 980px; margin: 0 auto 14px; }

    .toolbar{
      max-width: 520px;
      margin: 0 auto 10px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      background:#fff;
      border:1px solid #eee;
      border-radius:12px;
      padding:10px 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,.05);
      font-size: 14px;
    }
    .toolbar .left{ display:flex; gap:10px; align-items:center; }
    .toggle{ display:flex; align-items:center; gap:8px; user-select:none; }
    .toggle input{ width: 18px; height: 18px; }

    .pill{
      padding:6px 10px;
      border-radius:999px;
      background:#111;
      color:#fff;
      font-size:12px;
      white-space: nowrap;
    }
    .btn{
      border:0; background:#eee; padding:8px 10px; border-radius:10px; cursor:pointer;
    }

    .map-wrap{
      position: relative;
      max-width: 520px;
      margin: 0 auto;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      background:#fff;
      border:1px solid #eee;
    }
    .map-wrap img{ width: 100%; height: auto; display: block; }

    /* ðŸ”´ Puntos rojos */
    .dot{
      position:absolute;
      transform: translate(-50%, -50%);
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 2px solid #fff;
      background: #e11d48; /* rojo */
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
    }
    .dot:hover{ transform: translate(-50%, -50%) scale(1.08); }
    .dot:focus{ outline: 3px solid rgba(255,255,255,.75); }

    .help{
      max-width: 520px;
      margin: 10px auto 0;
      color:#555;
      font-size: 13px;
      line-height: 1.4;
    }
    code{ background:#fff; border:1px solid #eee; padding:2px 6px; border-radius:8px; }

    /* Modal */
    .modal{
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      background: rgba(0,0,0,.55);
      padding: 18px;
      z-index: 9999;
    }
    .modal.open{ display: grid; }
    .modal-card{
      width: min(560px, 100%);
      background: white;
      border-radius: 14px;
      padding: 16px 16px 12px;
      box-shadow: 0 20px 60px rgba(0,0,0,.25);
    }
    .modal-header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom: 8px;
    }
    .modal-title{ margin:0; font-size: 18px; }
    .meta{
      margin-top:10px;
      padding-top:10px;
      border-top:1px solid #f0f0f0;
      color:#666;
      font-size: 13px;
    }

    h1{
      text-align: center;
    }
  </style>
</head>

<body>
  <h1>Mapa interactivo</h1>



  <div class="map-wrap" id="mapWrap">
    <img src="mapa.png" alt="Mapa" id="mapImg" />

    <!-- ðŸ”´ PUNTOS AL LADO DE LOS NOMBRES (ajustables) -->

    <!-- Loop Stage -->
    <button class="dot" style="left: 20.70%; top: 14.39%;" data-id="loop_stage" aria-label="Loop Stage"></button>

    <!-- Escenario Principal -->
    <button class="dot" style="left: 74.80%; top: 20.05%;" data-id="escenario_principal" aria-label="Escenario Principal"></button>

    <!-- Basoa Stage -->
    <button class="dot" style="left: 55.47%; top: 30.37%;" data-id="basoa_stage" aria-label="Basoa Stage"></button>

    <!-- ENTRADA (la grande de arriba/centro izquierda) -->
    <button class="dot" style="left: 25.10%; top: 51.40%;" data-id="entrada_1" aria-label="Entrada 1"></button>

    <!-- Zona Saturada -->
    <button class="dot" style="left: 76.27%; top: 51.63%;" data-id="zona_saturada" aria-label="Zona Saturada"></button>

    <!-- Restaurante (el del centro) -->
    <button class="dot" style="left: 43.55%; top: 61.91%;" data-id="restaurante_1" aria-label="Restaurante 1"></button>

    <!-- Ãrea de Descanso -->
    <button class="dot" style="left: 72.07%; top: 63.87%;" data-id="area_descanso" aria-label="Ãrea de Descanso"></button>

    <!-- Lasai Stage -->
    <button class="dot" style="left: 48.54%; top: 72.46%;" data-id="lasai_stage" aria-label="Lasai Stage"></button>

    <!-- Zona seftanÃ­as -->
    <button class="dot" style="left: 56.64%; top: 85.12%;" data-id="zona_seftanias" aria-label="Zona seftanÃ­as"></button>


    <!-- âœ… APROXIMADOS (ajÃºstalos con Modo colocar) -->

    <!-- Pop Stage -->
    <button class="dot" style="left: 12%; top: 32%;" data-id="pop_stage" aria-label="Pop Stage"></button>

    <!-- Dance Stage -->
    <button class="dot" style="left: 10%; top: 50%;" data-id="dance_stage" aria-label="Dance Stage"></button>

    <!-- Victoria Stage -->
    <button class="dot" style="left: 12%; top: 66%;" data-id="victoria_stage" aria-label="Victoria Stage"></button>

    <!-- Bereziak Stage (dos rÃ³tulos) -->
    <button class="dot" style="left: 76%; top: 41%;" data-id="bereziak_1" aria-label="Bereziak Stage 1"></button>
    <button class="dot" style="left: 84%; top: 52%;" data-id="bereziak_2" aria-label="Bereziak Stage 2"></button>

    <!-- Firestone -->
    <button class="dot" style="left: 78%; top: 74%;" data-id="firestone" aria-label="Firestone"></button>

    <!-- Exits (3) -->
    <button class="dot" style="left: 86%; top: 22%;" data-id="exit_1" aria-label="Exit 1"></button>
    <button class="dot" style="left: 90%; top: 36%;" data-id="exit_2" aria-label="Exit 2"></button>
    <button class="dot" style="left: 86%; top: 44%;" data-id="exit_3" aria-label="Exit 3"></button>

    <!-- WC (3) -->
    <button class="dot" style="left: 29%; top: 48%;" data-id="wc_1" aria-label="WC 1"></button>
    <button class="dot" style="left: 28%; top: 58%;" data-id="wc_2" aria-label="WC 2"></button>
    <button class="dot" style="left: 21%; top: 86%;" data-id="wc_3" aria-label="WC 3"></button>

    <!-- Restaurantes extra -->
    <button class="dot" style="left: 86%; top: 57%;" data-id="restaurante_2" aria-label="Restaurante 2"></button>
    <button class="dot" style="left: 83%; top: 88%;" data-id="restaurante_3" aria-label="Restaurante 3"></button>

    <!-- ENTRADA inferior -->
    <button class="dot" style="left: 16%; top: 79%;" data-id="entrada_2" aria-label="Entrada 2"></button>
  </div>



  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle"></h2>
        <button class="btn" id="closeBtn" type="button">Cerrar</button>
      </div>
      <p id="modalBody"></p>
      <div class="meta" id="modalMeta"></div>
    </div>
  </div>

  <script>
    const info = {
  escenario_principal: {
    title: "Escenario Principal",
    icons: ["ðŸŽ¤", "ðŸ•’", "ðŸ—ºï¸", "ðŸšª", "âš ï¸"],
    body: "Escenario principal. AquÃ­ verÃ¡s horarios, artista actual y el siguiente. TambiÃ©n la ruta mÃ¡s rÃ¡pida y la salida mÃ¡s cercana.",
    quick: {
      "ðŸ•’ Horarios": "18:00â€“02:30",
      "ðŸŽ¶ Estilo": "Main / Hits / Headliners",
      "ðŸŽ¤ Ahora": "Nova Pulse",
      "â­ï¸ Siguiente": "Electric Harbor",
      "ðŸ—ºï¸ Ruta recomendada": "Por camino azul (menos gente)",
      "ðŸšª Salidas cercanas": "EXIT 1 (arriba), EXIT 2 (media)",
      "âš ï¸ Aviso": "Afluencia alta 22:30â€“00:30"
    }
  },

  loop_stage: {
    title: "Loop Stage",
    icons: ["ðŸŽ¶", "ðŸ•’", "ðŸŒ¿", "ðŸ‘¥", "ðŸ—ºï¸"],
    body: "Escenario rodeado de naturaleza. VerÃ¡s horarios, estilo musical, afluencia y el mejor acceso.",
    quick: {
      "ðŸ•’ Horarios": "17:30â€“01:30",
      "ðŸŽ¶ Estilo": "Indie / Alternativo",
      "ðŸ‘¥ Afluencia": "Media",
      "ðŸ—ºï¸ Acceso recomendado": "Desde Pop Stage por senda amarilla",
      "â„¹ï¸ Consejo": "Mejor zona para ver: lateral izquierdo"
    }
  },

  basoa_stage: {
    title: "Basoa Stage",
    icons: ["ðŸŒ²", "ðŸ•’", "âš ï¸", "ðŸ—ºï¸", "ðŸš»"],
    body: "Zona boscosa con picos de pÃºblico. VerÃ¡s avisos de aforo y rutas alternativas para entrar o salir.",
    quick: {
      "ðŸ•’ Horarios": "18:30â€“03:00",
      "ðŸŽ¶ Estilo": "Rock / Pop-Rock",
      "âš ï¸ Aforo": "Subiendo (pico 23:00)",
      "ðŸ—ºï¸ Ruta alternativa": "DesvÃ­o por camino azul (evita zona saturada)",
      "ðŸš» WC mÃ¡s cercano": "WC 1 (2 min)"
    }
  },

  pop_stage: {
    title: "Pop Stage",
    icons: ["ðŸŽ¸", "ðŸ•’", "ðŸ”", "ðŸš»", "ðŸ—ºï¸"],
    body: "Conciertos pop/indie. VerÃ¡s horarios, artistas y servicios cercanos (WC y comida).",
    quick: {
      "ðŸ•’ Horarios": "17:00â€“00:30",
      "ðŸŽ¤ Artistas": "Kora / Sunwaves / The City Lines",
      "ðŸ” Comida cerca": "Restaurante 1 (burger), Restaurante 2 (pizza)",
      "ðŸš» WC cerca": "WC 1 (3 min)",
      "ðŸ—ºï¸ Ruta rÃ¡pida": "Baja por senda azul desde Loop"
    }
  },

  dance_stage: {
    title: "Dance Stage",
    icons: ["ðŸŽ§", "ðŸ•’", "ðŸ’§", "ðŸš»", "âš ï¸"],
    body: "ElectrÃ³nica. Mucha gente de noche. VerÃ¡s horarios, WC cerca y recomendaciones de hidrataciÃ³n.",
    quick: {
      "ðŸ•’ Horarios": "20:00â€“03:30",
      "ðŸŽ¶ Estilo": "Techno / House",
      "âš ï¸ Afluencia": "Alta 00:00â€“02:00",
      "ðŸ’§ Consejo": "HidrÃ¡tate cada 45 min",
      "ðŸš» WC mÃ¡s cercano": "WC 1 (1â€“2 min)",
      "ðŸ—ºï¸ Salida recomendada": "EXIT 2 (si estÃ¡ muy lleno)"
    }
  },

  victoria_stage: {
    title: "Victoria Stage",
    icons: ["âœ¨", "ðŸ•’", "ðŸ§˜", "ðŸ—ºï¸", "ðŸš»"],
    body: "Escenario mÃ¡s tranquilo y accesible. Ideal para descansar sin salir del ambiente.",
    quick: {
      "ðŸ•’ Horarios": "16:30â€“23:30",
      "ðŸŽ¶ Estilo": "AcÃºstico / Chill",
      "ðŸ§˜ Ambiente": "Baja saturaciÃ³n",
      "ðŸ—ºï¸ Acceso": "Desde Entrada 2 por senda azul",
      "ðŸš» WC cerca": "WC 2 (3â€“4 min)"
    }
  },

  lasai_stage: {
    title: "Lasai Stage",
    icons: ["ðŸŒ¿", "ðŸ•’", "ðŸ§˜", "ðŸ‘¥", "ðŸ—ºï¸"],
    body: "Zona relajada. AquÃ­ verÃ¡s horarios y rutas tranquilas para moverte sin agobios.",
    quick: {
      "ðŸ•’ Horarios": "17:00â€“01:00",
      "ðŸŽ¶ Estilo": "Ambient / Indie suave",
      "ðŸ‘¥ Afluencia": "Baja",
      "ðŸ—ºï¸ Ruta tranquila": "Camino amarillo por la parte baja",
      "â„¹ï¸ Consejo": "Buen sitio para esperar a tu grupo"
    }
  },

  firestone: {
    title: "Firestone",
    icons: ["ðŸ”¥", "ðŸ•’", "ðŸŽª", "ðŸŸ", "ðŸ—ºï¸"],
    body: "Zona de actividades especiales. VerÃ¡s eventos, horarios y comida cercana.",
    quick: {
      "ðŸ•’ Horarios": "18:00â€“01:30",
      "ðŸŽª Actividades": "DJ set + show luces (21:30) / Sorteos (23:45)",
      "ðŸŸ Comida cerca": "Restaurante 3 (tacos) + snacks",
      "ðŸ—ºï¸ Ruta rÃ¡pida": "Desde Ãrea de Descanso (2 min)",
      "â„¹ï¸ Consejo": "Punto perfecto para â€œquedamos aquÃ­â€"
    }
  },

  bereziak_1: {
    title: "Bereziak Stage (Zona 1)",
    icons: ["ðŸŽµ", "ðŸ•’", "ðŸ—ºï¸", "ðŸš»", "ðŸ‘¥"],
    body: "Bereziak (ubicaciÃ³n 1). VerÃ¡s horarios, accesos y servicios cerca.",
    quick: {
      "ðŸ•’ Horarios": "19:00â€“02:00",
      "ðŸŽ¶ Estilo": "Urbano / FusiÃ³n",
      "ðŸ‘¥ Afluencia": "Mediaâ€“Alta 22:00",
      "ðŸ—ºï¸ Acceso recomendado": "Por camino azul desde Principal",
      "ðŸš» WC cerca": "WC 2 (4 min)"
    }
  },

  bereziak_2: {
    title: "Bereziak Stage (Zona 2)",
    icons: ["ðŸŽµ", "ðŸ•’", "âš ï¸", "ðŸ—ºï¸", "ðŸšª"],
    body: "Bereziak (ubicaciÃ³n 2). AquÃ­ verÃ¡s rutas alternativas si hay aglomeraciÃ³n y salida cercana.",
    quick: {
      "ðŸ•’ Horarios": "20:00â€“03:00",
      "ðŸŽ¶ Estilo": "Electro / Experimental",
      "âš ï¸ Aviso": "Cuidado con embudo cerca del EXIT 3",
      "ðŸ—ºï¸ Ruta alternativa": "Rodeo por zona de restaurantes",
      "ðŸšª Salida cercana": "EXIT 3 (derecha)"
    }
  },

  zona_saturada: {
    title: "Zona Saturada",
    icons: ["âš ï¸", "ðŸ‘¥", "ðŸ—ºï¸", "ðŸš‘", "ðŸšª"],
    body: "Zona con mucha gente. El mapa recomienda rutas alternativas para evitar aglomeraciones.",
    quick: {
      "ðŸ‘¥ Nivel": "Muy alto (pico 21:00â€“23:30)",
      "ðŸ—ºï¸ Ruta alternativa": "Borde inferior por camino azul",
      "ðŸš‘ Seguridad": "Si te mareas, busca Ãrea de Descanso",
      "ðŸšª Salida recomendada": "EXIT 2 (media)"
    }
  },

  area_descanso: {
    title: "Ãrea de Descanso",
    icons: ["ðŸ§˜", "ðŸŒ¿", "ðŸ’§", "ðŸ—ºï¸", "ðŸ§‘â€ðŸ¦½"],
    body: "Zona para bajar estÃ­mulo, sentarse y recuperar. Recomendado si estÃ¡s cansad@ o agobiad@.",
    quick: {
      "ðŸ§˜ QuÃ© hay": "Bancos / zona tranquila",
      "ðŸ’§ RecomendaciÃ³n": "HidrataciÃ³n + pausa 10 min",
      "ðŸ§‘â€ðŸ¦½ Accesible": "SÃ­",
      "ðŸ—ºï¸ Ruta rÃ¡pida": "Desde Restaurante 2 (2 min)"
    }
  },

  restaurante_1: {
    title: "Restaurante (1)",
    icons: ["ðŸ”", "ðŸ¥¤", "ðŸ•’", "ðŸ‘¥", "ðŸ§‘â€ðŸ¦½"],
    body: "Comida y bebida. VerÃ¡s el tipo de comida, horarios y nivel de cola.",
    quick: {
      "ðŸ” Tipo": "Hamburguesas",
      "ðŸ¥¤ Bebidas": "Agua / refrescos",
      "ðŸ•’ Horario": "12:00â€“02:30",
      "ðŸ‘¥ Cola": "Media (pico 20:30)",
      "ðŸ§‘â€ðŸ¦½ Accesible": "SÃ­"
    }
  },

  restaurante_2: {
    title: "Restaurante (2)",
    icons: ["ðŸ•", "ðŸ¥—", "ðŸ•’", "ðŸ‘¥", "ðŸ—ºï¸"],
    body: "Comida y bebida. Ideal si estÃ¡s cerca de Bereziak o descanso.",
    quick: {
      "ðŸ• Tipo": "Pizza",
      "ðŸ¥— Opciones": "Vegetariana",
      "ðŸ•’ Horario": "12:00â€“01:30",
      "ðŸ‘¥ Cola": "Bajaâ€“Media",
      "ðŸ—ºï¸ Alternativa": "Restaurante 1 si hay cola"
    }
  },

  restaurante_3: {
    title: "Restaurante (3)",
    icons: ["ðŸŒ®", "ðŸŸ", "ðŸ•’", "ðŸ‘¥", "ðŸ—ºï¸"],
    body: "Comida en la zona baja. Perfecto si vienes de Lasai o Firestone.",
    quick: {
      "ðŸŒ® Tipo": "Tacos",
      "ðŸŸ Extras": "Snacks",
      "ðŸ•’ Horario": "13:00â€“02:00",
      "ðŸ‘¥ Cola": "Media",
      "ðŸ—ºï¸ Ruta rÃ¡pida": "Desde Firestone (1â€“2 min)"
    }
  },

  entrada_1: {
    title: "Entrada (1)",
    icons: ["ðŸšª", "ðŸŽŸï¸", "ðŸ•’", "ðŸ‘¥", "ðŸ—ºï¸"],
    body: "Acceso principal. VerÃ¡s horario, recomendaciones para evitar colas y ruta a los escenarios.",
    quick: {
      "ðŸ•’ Horario": "16:00â€“03:00",
      "ðŸŽŸï¸ Control": "Pulsera + ticket",
      "ðŸ‘¥ Cola": "Media (pico 19:00)",
      "ðŸ—ºï¸ Ruta rÃ¡pida": "A Dance/Pop por camino azul"
    }
  },

  entrada_2: {
    title: "Entrada (2)",
    icons: ["ðŸšª", "ðŸŽŸï¸", "ðŸ•’", "ðŸ‘¥", "ðŸ—ºï¸"],
    body: "Acceso alternativo. Recomendado si vienes a zona baja (Lasai/Firestone).",
    quick: {
      "ðŸ•’ Horario": "16:00â€“02:00",
      "ðŸ‘¥ Cola": "Baja",
      "ðŸ—ºï¸ Ruta rÃ¡pida": "A Lasai por camino amarillo",
      "â„¹ï¸ Consejo": "Menos gente que la Entrada 1"
    }
  },

  exit_1: {
    title: "Salida (1)",
    icons: ["ðŸšª", "â¬…ï¸", "ðŸ—ºï¸", "âš ï¸"],
    body: "Salida superior. Ãštil si estÃ¡s en escenario principal.",
    quick: {
      "ðŸ—ºï¸ Ruta": "Desde Principal por camino azul",
      "âš ï¸ Consejo": "Evita el centro en hora pico"
    }
  },
  exit_2: {
    title: "Salida (2)",
    icons: ["ðŸšª", "â¬…ï¸", "ðŸ—ºï¸", "âš ï¸"],
    body: "Salida media. Recomendable para descongestionar zona derecha.",
    quick: {
      "ðŸ—ºï¸ Ruta": "Desde Bereziak 1 por borde derecho",
      "âš ï¸ Consejo": "Ãšsala tras el concierto del Principal"
    }
  },
  exit_3: {
    title: "Salida (3)",
    icons: ["ðŸšª", "â¬…ï¸", "ðŸ—ºï¸", "âš ï¸"],
    body: "Salida inferior derecha. Buena opciÃ³n desde Bereziak 2.",
    quick: {
      "ðŸ—ºï¸ Ruta": "Desde Bereziak 2 (1â€“2 min)",
      "âš ï¸ Consejo": "AtenciÃ³n a embudo si hay mucha gente"
    }
  },

  wc_1: {
    title: "WC (1)",
    icons: ["ðŸš»", "ðŸ§‘â€ðŸ¦½", "ðŸ§¼", "ðŸ—ºï¸"],
    body: "BaÃ±os en zona media. El mapa te guÃ­a rÃ¡pido hasta aquÃ­.",
    quick: {
      "ðŸ§‘â€ðŸ¦½ Accesible": "SÃ­",
      "ðŸ§¼ Higiene": "Lavamanos",
      "ðŸ—ºï¸ Ruta": "Desde Dance Stage (1â€“2 min)"
    }
  },
  wc_2: {
    title: "WC (2)",
    icons: ["ðŸš»", "ðŸ§‘â€ðŸ¦½", "ðŸ§¼", "ðŸ—ºï¸"],
    body: "BaÃ±os en zona central. Ruta corta desde Basoa y restaurantes.",
    quick: {
      "ðŸ§‘â€ðŸ¦½ Accesible": "SÃ­",
      "ðŸ—ºï¸ Ruta": "Desde Basoa Stage (2â€“3 min)"
    }
  },
  wc_3: {
    title: "WC (3)",
    icons: ["ðŸš»", "ðŸ§¼", "ðŸ—ºï¸"],
    body: "BaÃ±os en zona inferior. Ãštiles si estÃ¡s por Lasai/Entrada 2.",
    quick: {
      "ðŸ—ºï¸ Ruta": "Desde Lasai Stage (2â€“3 min)",
      "â„¹ï¸ Consejo": "Menos cola a Ãºltima hora"
    }
  },

  zona_seftanias: {
    title: "Zona seftanÃ­as",
    icons: ["ðŸ•ï¸", "ðŸ•’", "â„¹ï¸", "âœ…"],
    body: "Zona especÃ­fica del recinto. AquÃ­ verÃ¡s quÃ© es, quÃ© servicios ofrece, horarios y normas bÃ¡sicas.",
    quick: {
      "â„¹ï¸ QuÃ© es": "Punto de encuentro + actividades",
      "ðŸ•’ Horario": "17:00â€“01:00",
      "âœ… Normas": "Respeta colas y mantÃ©n libre el paso",
      "ðŸ“ Uso": "Quedadas del grupo y orientaciÃ³n"
    }
  }
};

    // Modal
const modal = document.getElementById("modal");
const modalTitle = document.getElementById("modalTitle");
const modalBody = document.getElementById("modalBody");
const modalMeta = document.getElementById("modalMeta");
const closeBtn = document.getElementById("closeBtn");

document.querySelectorAll(".dot").forEach(btn => {
  btn.addEventListener("click", () => {
    const id = btn.dataset.id;

    const data = info[id] || {
      title: "Punto",
      icons: ["â„¹ï¸"],
      body: "AÃ±ade informaciÃ³n para este punto.",
      quick: {}
    };

    // âœ… TÃ­tulo
    modalTitle.textContent = data.title;

    // âœ… LÃ­nea de pictogramas
    const iconsLine =
      Array.isArray(data.icons) && data.icons.length
        ? data.icons.join(" ")
        : "";

    // âœ… Bloque de datos rÃ¡pidos (key: value)
    const quickLines =
      data.quick && typeof data.quick === "object"
        ? Object.entries(data.quick)
            .map(([k, v]) => `${k}: ${v}`)
            .join("\n")
        : "";

    // âœ… Contenido final del modal (texto)
    modalBody.textContent =
      (iconsLine ? iconsLine + "\n\n" : "") +
      (data.body ? data.body + "\n\n" : "") +
      (quickLines ? quickLines : "");

    modalMeta.textContent = `ID: ${id}`;
    modal.classList.add("open");
    modal.setAttribute("aria-hidden", "false");
  });
});

function closeModal() {
  modal.classList.remove("open");
  modal.setAttribute("aria-hidden", "true");
}
closeBtn.addEventListener("click", closeModal);
modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
document.addEventListener("keydown", (e) => { if (e.key === "Escape") closeModal(); });

// Modo colocar (sin alerts) + copiar coords
const placeMode = document.getElementById("placeMode");
const coordsPill = document.getElementById("coordsPill");
const copyBtn = document.getElementById("copyBtn");
const mapWrap = document.getElementById("mapWrap");
const mapImg = document.getElementById("mapImg");
let lastCoords = "";

mapWrap.addEventListener("click", (e) => {
  if (!placeMode.checked) return;
  if (e.target.classList.contains("dot")) return;

  const rect = mapImg.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  const left = (x / rect.width) * 100;
  const top = (y / rect.height) * 100;

  lastCoords = `left: ${left.toFixed(2)}%; top: ${top.toFixed(2)}%;`;
  coordsPill.textContent = lastCoords;
});

copyBtn.addEventListener("click", async () => {
  if (!lastCoords) return;
  try {
    await navigator.clipboard.writeText(lastCoords);
    coordsPill.textContent = lastCoords + " (copiado)";
    setTimeout(() => coordsPill.textContent = lastCoords, 900);
  } catch {
    coordsPill.textContent = lastCoords + " (cÃ³pialo a mano)";
  }
});

  </script>
</body>
</html>
